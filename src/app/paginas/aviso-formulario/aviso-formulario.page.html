<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/avisos"></ion-back-button>
    </ion-buttons>
    <ion-title>Nuevo Aviso</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <ion-list>
      <!-- Título -->
      <ion-item>
        <ion-label position="floating">Título *</ion-label>
        <ion-input formControlName="titulo" type="text"></ion-input>
      </ion-item>
      <ion-note color="danger" *ngIf="titulo?.invalid && (titulo?.dirty || titulo?.touched)">
        <div *ngIf="titulo?.errors?.required">El título es requerido</div>
        <div *ngIf="titulo?.errors?.minlength">Mínimo 5 caracteres</div>
      </ion-note>

      <!-- Descripción -->
      <ion-item>
        <ion-label position="floating">Descripción *</ion-label>
        <ion-textarea formControlName="descripcion" rows="5"></ion-textarea>
      </ion-item>
      <ion-note color="danger" *ngIf="descripcion?.invalid && (descripcion?.dirty || descripcion?.touched)">
        <div *ngIf="descripcion?.errors?.required">La descripción es requerida</div>
        <div *ngIf="descripcion?.errors?.minlength">Mínimo 20 caracteres</div>
      </ion-note>

      <!-- Foto -->
      <ion-item>
        <ion-button expand="block" fill="outline" (click)="takePhoto()">
          <ion-icon name="camera" slot="start"></ion-icon>
          Tomar Foto
        </ion-button>
      </ion-item>

      <ion-img *ngIf="imagenPreview" [src]="imagenPreview" class="image-preview"></ion-img>

      <!-- Submit -->
      <ion-button 
        type="submit" 
        expand="block" 
        [disabled]="form.invalid"
        class="ion-margin-top">
        Publicar Aviso
      </ion-button>
    </ion-list>
  </form>
</ion-content>